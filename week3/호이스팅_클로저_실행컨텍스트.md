호이스팅 (hoisting)
출처: https://gmlwjd9405.github.io/2019/04/22/javascript-hoisting.html

개념
함수 내부에 선언된 변수들을 위로 모두 끌어올려서

해당 함수 유효범위의 최상단에 선언하는 것

⇒ 더 나중에 선언해두어도 위에서 사용 가능한 특성

\*\* 자바스크립트 엔진이

실제로 변수를 끌어올리지는 않지만 편의상 끌어올리는 것으로 간주

호이스팅 되는 경우
var 변수 '선언' (JS에 변수명만 알리는 것 ⇒ 예: var x; )
함수 선언식 (= 그냥 function만 사용)
호이스팅이 되지 않는 경우
let/const 변수
var 변수 ‘할당’ (변수에 값을 저장하는 것 ⇒ 예: var x = ‘christmas’; )
함수 표현식(= 변수에 담긴 function 함수)
호이스팅을 알아야 하는 이유
코드의 가독성과 유지보수를 위해
스코프 꼬임 현상을 방지하기 위해

=> 호이스팅은 가급적 일어나지 않도록 해야 함

++ ES6가 보편화되기 전까지 (ES5로 트랜스컴파일을 해야 할 때 필요)

호이스팅을 막는 방법
함수와 변수를 코드 상단부에서 선언하기
let/const 사용하기
관련 추가 내용
자바스크립트의 함수는

일급객체(혹은 일급시민)이기 때문에

함수 표현식(= 변수에 함수를 담는 것)이 가능하다.

일급객체(일급시민)
x라는 것이 있을 때

x를 변수에 담을 수 있고,
x를 매개변수에 넘길 수 있고,
x를 함수에서 반환할 수 있을 때
이를 ‘일급객체’라고 한다.

즉, 자바스크립트의 함수는 일급객체이므로

함수를 변수에 담을 수 있고,

함수를 매개변수로 넘길 수 있고,

함수를 함수에서 반환할 수 있다.

클로저 (closure)
출처: https://opentutorials.org/course/743/654

개념
내부함수가 외부함수의 지역변수에 접근할 수 있는 특성

function outer(){
var title = 'everybody';

    function inner(){
        alert(title);
    }

    inner();

}

outter();
내부함수 inner가 외부함수 outer의 지역변수(title)에 접근 가능

⇒ outer()의 실행결과로 'everybody'가 alert 창에 잘 출력됨

=> 외부함수의 실행이 끝나서 외부함수가 소멸된 이후에도

내부함수가 외부함수의 변수에 접근 가능

\*\* 내가 이해한 내용
함수가 실행되면 함수는 종료됨(소멸함)

그리고 안에 있는 지역변수도
함수가 소멸하면서 더 이상 사용할 수 없어야 함

위의 코드에서 outer 함수가 실행된 결과값이 inner 변수에 담기고

inner함수를 실행하면서 outer가 실행되고 종료되므로

outer 함수의 지역변수인 title도 더 이상 사용할 수 없어야 한다

하지만 내부함수가 참조한 외부함수의 지역변수는

외부함수의 실행이 끝나도 사라지지 않고 계속해서 역할을 한다.

(= 만들어진 환경을 기억한다)

그래서 inner 함수를 실행하면 지역변수 title을 가져와서(= 참조해서)
내부함수의 alert 내용을 잘 출력함

즉, 외부함수가 종료되어도 내부함수가 여전히 외부함수의 '지역변수'를 사용 가능

그리고 이렇게 내부함수까지 모두 실행되고 나서야 비로소 외부함수도 종료됨

출처 설명
(함수 outter를 호출한 결과가 변수 inner에 담긴다.

다음 줄로 넘어오면 outter 함수는 실행이 끝났기 때문에

이 함수의 지역변수는 소멸되는 것이 자연스럽지만

함수 inner를 실행했을 때 everybody가 출력된다는 것은

외부함수의 지역변수 title이 소멸되지 않았다는 것을 의미)

정리
클로저란

내부함수가 외부함수의 지역변수에 접근할 수 있고
외부함수의 지역변수를 사용하는 내부함수가 소멸될 때까지 외부함수가 소멸되지 않는 특성

실행컨텍스트
출처: https://poiemaweb.com/js-execution-context

출처: https://junilhwang.github.io/TIL/Javascript/Domain/Execution-Context/#_1-개념

개념
실행 가능한 코드가 실행되기 위해 필요한 환경

실행 가능한 코드란?

전역 코드 : 전역 영역에 존재하는 코드
Eval 코드 : eval 함수로 실행되는 코드
함수 코드 : 함수 내에 존재하는 코드
일반적으로 실행 가능한 코드는 전역 코드와 함수 내 코드

해당 코드들이 실행되면
실행 컨텍스트의 스택(Stack)이 생성되고 소멸한다.
(실행이 시작되면 call stack에 쌓이고 실행이 완료된 내용은 스택에서 소멸)

관련 개념
변수 : 전역변수, 지역변수, 매개변수, 객체의 프로퍼티
함수 선언
변수의 유효범위(Scope)
this

- 호이스팅은 실행 컨텍스트가 활성화되는 시점에 발생하고
  클로저에서 내부함수가 외부함수의 지역변수를 참조 가능한 것은
  모두 실행컨텍스트와 관련이 있다.\*\*

예시 코드
var a = 1; // 전역 컨텍스트

function outer () { // outer 컨텍스트
function inner () { // inner 컨텍스트
console.log(a); // undefined
var a = 3;
console.log(a); // 3
}

inner();
console.log(a); // 1
}

outer();
console.log(a); // 1
=> 브라우저 콘솔에서 실행하면 위에서부터 순서대로 실행됨
